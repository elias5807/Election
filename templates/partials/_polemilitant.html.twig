<div class="dashboard-container" data-controller="native-board">

    {# ================================================= #}
    {# 1. LE P√îLE NUM√âRO 1 (PRIORITAIRE - GAUCHE)        #}
    {# ================================================= #}
    {% for pole in poles %}
        {% if pole.id == 1 %}
            
            {# On pr√©pare le style du chef #}
            
            {# NOUVELLE CLASSE : sidebar-section #}
            <div class="sidebar-section">
                
                {# NOUVELLE CLASSE : sidebar-title #}
                <h3 class="sidebar-title"> {{ pole.nomPole }}</h3>
                
                {# NOUVELLE CLASSE : sidebar-grid #}
                <div class="sidebar-grid" 
                     data-pole="{{ pole.nomPole }}"
                     data-action="dragover->native-board#onDragOver drop->native-board#onDrop dragenter->native-board#onDragEnter dragleave->native-board#onDragLeave">
                    
                    {% for militant in militants %}
                        {% if militant.pole and militant.pole.id == 1 %}
                            {% include 'partials/_militant_card.html.twig' with {'militant': militant} %}
                        {% endif %}
                    {% endfor %}
                    
                </div>
            </div>

        {% endif %}
    {% endfor %}


    {# ================================================= #}
    {# 2. LES NON ASSIGN√âS (NULL) - AU MILIEU            #}
    {# ================================================= #}
    <div class="pole-section" style="border-right: 2px dashed #ccc;">
        <h3 class="pole-title">üìç Non assign√©s</h3>
        
        {# data-pole="null" est crucial #}
        <div class="dashboard-grid" 
             data-pole="null"
             data-action="dragover->native-board#onDragOver drop->native-board#onDrop dragenter->native-board#onDragEnter dragleave->native-board#onDragLeave"
             style="min-height: 150px; background-color: #f9f9f9;">
            
            {# BOUCLE SUR TOUS LES MILITANTS #}
            {% for militant in militants %}
                
                {# CONDITION : Est-ce qu'il n'a PAS de p√¥le ? #}
                {% if militant.pole is null %}
                    {% include 'partials/_militant_card.html.twig' with {'militant': militant} %}
                {% endif %}

            {% endfor %}
            
        </div>
    </div>


    {# ================================================= #}
    {# 3. LES AUTRES P√îLES (TOUT LE RESTE)               #}
    {# ================================================= #}
    {% for pole in poles %}
        {# On exclut le p√¥le 1 car il est d√©j√† affich√© #}
        {% if pole.id != 1 %}
            
            <div class="pole-section">
                <h3 class="pole-title">{{ pole.nomPole }}</h3>
                
                <div class="dashboard-grid" 
                     data-pole="{{ pole.nomPole }}"
                     data-action="dragover->native-board#onDragOver drop->native-board#onDrop dragenter->native-board#onDragEnter dragleave->native-board#onDragLeave"
                     style="min-height: 150px;">
                    
                    {# BOUCLE SUR TOUS LES MILITANTS #}
                    {% for militant in militants %}
                        
                        {# CONDITION : Est-ce le bon p√¥le ? #}
                        {% if militant.pole and militant.pole.id == pole.id %}
                            {% include 'partials/_militant_card.html.twig' with {'militant': militant} %}
                        {% endif %}

                    {% endfor %}
                    
                </div>
            </div>

        {% endif %}
    {% endfor %}

</div>