{# 1. On crée une liste des noms de pôles uniques #}
{% set poleNames = [] %}
{% for m in militants %}
    {% if m.pole and m.pole.nomPole not in poleNames %}
        {% set poleNames = poleNames|merge([m.pole.nomPole]) %}
    {% endif %}
{% endfor %}

<div class="dashboard-container">
    <h1 class="page-title">Militants par Pôle</h1>

    {# 2. On boucle sur chaque nom de pôle #}
    {% for currentPoleName in poleNames %}
        
        <div class="pole-section">
            <h2 class="pole-title">{{ currentPoleName }}</h2>
            
            <div class="dashboard-grid">
                {# 3. On repasse sur tous les militants pour afficher ceux du pôle actuel #}
                {% for militant in militants %}
                    {% if militant.pole and militant.pole.nomPole == currentPoleName %}
                        
                        <div class="mini-card">
                            <div class="card-name">
                                {{ militant.prenom }} {{ militant.nom|upper }}
                            </div>
                            </div>

                    {% endif %}
                {% endfor %}
            </div>
        </div>
    {% endfor %}

    
    {# 4. Gestion des "Non assignés" (Optionnel) 
    <div class="pole-section">
        <h2 class="pole-title" style="color: #6b7280;">Non assignés</h2>
        <div class="dashboard-grid">
            {% for militant in militants %}
                {% if not militant.pole %}
                     <div class="mini-card">
                        <div class="card-name">{{ militant.prenom }} {{ militant.nom|upper }}</div>
                        </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>#}
</div>